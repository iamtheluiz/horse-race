(this["webpackJsonphorse-race"]=this["webpackJsonphorse-race"]||[]).push([[0],{28:function(e,t,c){},35:function(e,t,c){},36:function(e,t,c){},37:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){"use strict";c.r(t);var n=c(1),s=c.n(n),r=c(18),a=c.n(r),o=c(3),i={light:{"--background-color":"#FFF","--text-color":"#000","--theme-button":"#1f1e1a","--border-color":"#000"},dark:{"--background-color":"#000","--text-color":"#FFF","--theme-button":"#f7e435","--border-color":"#404040"}},l=function(){var e=Object(n.useState)("light"),t=Object(o.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){var e=localStorage.getItem("@iamtheluiz-horse-race/theme");e&&Object.keys(i).includes(e)&&s(e)}),[]),Object(n.useEffect)((function(){!function(e){var t=i[e];localStorage.setItem("@iamtheluiz-horse-race/theme",e),Object.keys(t).forEach((function(e){var c=t[e];document.documentElement.style.setProperty(e,c)}))}(c)}),[c]),{setSelectedTheme:s,selectedTheme:c}},u=c(8),j=c(2),b=c(15),d=c(23),h=(c(28),c(0)),O=function(e){var t=e.children,c=Object(d.a)(e,["children"]);return Object(h.jsx)("button",Object(b.a)(Object(b.a)({className:"button"},c),{},{children:t}))},m=function(){var e=Object(j.f)(),t=l(),c=t.selectedTheme,n=t.setSelectedTheme;return Object(h.jsxs)("section",{id:"menu",children:[Object(h.jsx)("h1",{children:"Horse Race!"}),Object(h.jsx)("span",{className:"subtitle",children:"Are you ready? Make your bets!"}),Object(h.jsx)(O,{id:"start-game",onClick:function(){e.push("/bet")},children:"Start!"}),Object(h.jsx)(O,{id:"start-game",style:{backgroundColor:"var(--theme-button)"},onClick:function(){n("light"===c?"dark":"light")},children:"Theme"})]})},f=Object(n.createContext)(null),x=function(e){var t=e.children,c=Object(n.useState)({}),s=Object(o.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)([{name:"Silver",velocity:0,position:0},{name:"Pegasus",velocity:0,position:0},{name:"Jockey",velocity:0,position:0},{name:"Washington",velocity:0,position:0}]),l=Object(o.a)(i,2),u=l[0],j=l[1];return Object(h.jsx)(f.Provider,{value:{selectedHorse:r,setSelectedHorse:a,horses:u,setHorses:j},children:t})};function v(){var e=Object(n.useContext)(f);if(!e)throw new Error("useHorse must be used within a HorseProvider");return e}var g=Object(n.createContext)(null),p=function(e){var t=e.children,c=Object(n.useState)(10),s=Object(o.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)(1),l=Object(o.a)(i,2),u=l[0],j=l[1];return Object(h.jsx)(g.Provider,{value:{bet:u,setBet:j,balance:r,setBalance:a},children:t})};function y(){var e=Object(n.useContext)(g);if(!e)throw new Error("useMoney must be used within a MoneyProvider");return e}var A=c.p+"static/media/horse.6e0e9823.gif",k=(c(35),function(e){var t=e.horse,c=v(),n=c.setSelectedHorse,s=c.selectedHorse;return Object(h.jsxs)("div",{className:"horse-container horse-item ".concat(t.name===s.name?"active":""),onClick:function(){return n(t)},children:[Object(h.jsx)("img",{src:A,alt:"Horse Gif"}),Object(h.jsx)("span",{children:t.name})]})}),S=(c(36),Object(n.createContext)({})),w=function(e){var t=e.children,c=Object(n.useState)(!1),s=Object(o.a)(c,2),r=s[0],a=s[1],i=Object(n.useState)({}),l=Object(o.a)(i,2),u=l[0],j=l[1];return Object(n.useEffect)((function(){u.title&&u.message&&u.type&&a(!0)}),[u]),Object(h.jsx)(S.Provider,{value:{isOpen:r,dialog:u,setDialog:j,closeDialog:function(){j({}),a(!1)}},children:t})};function N(){var e=Object(n.useContext)(S);if(!e)throw new Error("useHorse must be used within a HorseProvider");return e}var E=function(){var e=v(),t=e.horses,c=e.selectedHorse,n=y(),s=n.balance,r=n.bet,a=n.setBet,o=N().setDialog,i=Object(j.f)();return Object(h.jsxs)("section",{id:"bet",children:[Object(h.jsxs)("header",{children:[Object(h.jsx)(O,{style:{backgroundColor:"#cc4242"},onClick:function(){return i.push("/")},children:"Menu"}),Object(h.jsx)("h1",{children:"Make Your Bet!"}),Object(h.jsxs)("div",{className:"money",children:[Object(h.jsx)("div",{className:"icon",children:"$"}),Object(h.jsx)("span",{children:s.toFixed(2)})]})]}),Object(h.jsx)("div",{className:"content",children:Object(h.jsx)("div",{className:"horse-list",children:t.map((function(e){return Object(h.jsx)(k,{horse:e},e.name)}))})}),Object(h.jsx)("footer",{children:Object(h.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t.includes(c)?r<.01?o({title:"Bet not allowed",message:"You can't use a value lower than $0.01 in a bet!",type:"warning"}):r>s?o({title:"Bet greater than balance",message:"You can't bet more than you have! Take money in the bank (\u30fb_\u30fb;)",type:"warning"}):i.push("/race"):o({title:"Missing selected horse",message:"(\u261e\uff9f\u30ee\uff9f)\u261e You need to select a horse to submit a bet!",type:"warning"})},children:[Object(h.jsx)("span",{children:"$"}),Object(h.jsx)("input",{className:"input-text",type:"number",step:"0.01",value:r,onChange:function(e){return a(Number(e.target.value))}}),Object(h.jsx)(O,{style:{backgroundColor:"#93cc42"},children:"Bet!"})]})})]})},C=c(10),F={1:.75,2:.25,3:0,4:0},H="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAA4klEQVRYR+2XsQ3DMAwErSXSBSkzRQbwJm6ySFoP41lSBumyhA0ZEEAYlGQSX3wAuhZOzzdJv9NA9iQyPUNX0HO8r1n0vLy7Z1vFneU0LymQcpFXlIVTFXSEeEVZOf8hqFaV1SUPR3XIA9Ia2sNJr+mxT5F8vp9fcxtcb5dT28LDSbmK4wUekKbQysnnd0EZJkVZQTW7LJxyllMQ1Suja2rUuKI4fHsIVRmKEw5JJ7U4Ew6FQ9IBV/xAjSuKw9fUdN+yCGii2bRQGAFNTqMWDPn+OlD7A8Xh20OoylCccKgXPzY1JifMrYyfYQAAAABJRU5ErkJggg==",B=(c(37),function(){var e=Object(n.useState)({}),t=Object(o.a)(e,2),c=t[0],s=t[1],r=v(),a=r.horses,i=r.setHorses,l=r.selectedHorse,u=y(),b=u.bet,d=u.balance,O=u.setBalance,m=N(),f=Object(j.f)();return Object(n.useEffect)((function(){!function(){for(var e=Object(C.a)(a),t=0;t<e.length;t++)e[t].position=0;i(e)}(),function(){var e=setInterval((function(){for(var t=Object(C.a)(a),c=0;c<t.length;c++)if(t[c].position+=Math.random(),t[c].position>=100){s(t[c]),clearInterval(e);break}i(t)}),50)}()}),[]),Object(n.useEffect)((function(){c.name&&function(){var e=Object(C.a)(a).sort((function(e,t){return e.position<t.position?1:e.position>t.position?-1:0})).indexOf(l)+1,t=4*b*F[e];O(d+t-b),m.setDialog({title:"".concat(c.name," wins!"),message:0===t?"You lost $ ".concat(b):"You won $ ".concat(t),type:"success"}),f.push("/bet")}()}),[c]),Object(h.jsxs)("section",{id:"race",children:[Object(h.jsx)("div",{className:"sky"}),Object(h.jsxs)("div",{className:"ground",children:[Object(h.jsx)("div",{className:"fance",style:{backgroundImage:"url(".concat(H,")")}}),Object(h.jsxs)("div",{className:"racecourse",children:[Object(h.jsx)("div",{className:"tracks",children:a.map((function(e){return Object(h.jsx)("div",{className:"track"},e.name)}))}),Object(h.jsx)("div",{className:"horses",children:a.map((function(e){return Object(h.jsx)("div",{className:"horse-item",style:{marginLeft:"".concat(e.position,"%")},children:Object(h.jsx)("img",{src:"/img/horse.gif",alt:"Horse Gif"})},e.name)}))}),Object(h.jsx)("div",{className:"fance",style:{backgroundImage:"url(".concat(H,")")}})]})]})]})}),J=function(){return Object(h.jsx)(u.a,{basename:"horse-race",children:Object(h.jsxs)(j.c,{children:[Object(h.jsx)(j.a,{path:"/",component:m,exact:!0}),Object(h.jsx)(j.a,{path:"/bet",component:E,exact:!0}),Object(h.jsx)(j.a,{path:"/race",component:B,exact:!0})]})})},I=(c(38),function(){var e=N(),t=e.isOpen,c=e.dialog,n=e.closeDialog;return t?t&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{id:"dialog-container",children:[Object(h.jsx)("strong",{children:c.title}),Object(h.jsx)("p",{children:c.message}),Object(h.jsx)(O,{onClick:n,children:"Close"})]}),Object(h.jsx)("div",{id:"dialog-filter"})]}):Object(h.jsx)(h.Fragment,{})}),P=function(e){var t=e.children;return Object(h.jsx)(w,{children:Object(h.jsx)(p,{children:Object(h.jsxs)(x,{children:[Object(h.jsx)(I,{}),t]})})})},Q=(c(39),function(){return l(),Object(h.jsx)(P,{children:Object(h.jsx)(J,{})})});a.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(Q,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.c86ef264.chunk.js.map