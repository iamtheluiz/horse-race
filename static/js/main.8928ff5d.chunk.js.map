{"version":3,"sources":["config/themes.ts","hooks/useTheme.tsx","components/Button/index.tsx","pages/Main/index.tsx","contexts/horse.tsx","contexts/money.tsx","components/HorseItem/index.tsx","contexts/dialog.tsx","pages/Bet/index.tsx","config/betReward.ts","assets/fence.png","pages/Race/index.tsx","routes.tsx","components/Dialog/index.tsx","contexts/index.tsx","App.tsx","index.tsx"],"names":["themes","light","dark","useTheme","useState","selectedTheme","setSelectedTheme","useEffect","storedTheme","localStorage","getItem","Object","keys","includes","themeKey","theme","setItem","forEach","key","value","document","documentElement","style","setProperty","applyTheme","Button","children","props","className","Main","history","useHistory","id","onClick","push","backgroundColor","HorseContext","createContext","HorseProvider","selectedHorse","setSelectedHorse","name","velocity","position","horses","setHorses","Provider","useHorse","context","useContext","Error","MoneyContext","MoneyProvider","balance","setBalance","bet","setBet","useMoney","HorseItem","horse","src","alt","DialogContext","DialogProvider","isOpen","setIsOpen","dialog","setDialog","title","message","type","closeDialog","useDialog","Bet","toFixed","map","onSubmit","event","preventDefault","step","onChange","Number","target","betReward","1","2","3","4","Race","winner","setWinner","horseList","i","length","resetGame","gameLoopInterval","setInterval","Math","random","clearInterval","startGame","selectedHorsePosition","sort","a","b","indexOf","prize","endGame","backgroundImage","fenceImage","marginLeft","Routes","basename","path","component","exact","Dialog","ApplicationProvider","App","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.8928ff5d.chunk.js","sourcesContent":["export type Theme = {\r\n  [key: string]: string;\r\n  \"--background-color\": string;\r\n  \"--text-color\": string;\r\n  \"--theme-button\": string;\r\n  \"--border-color\": string;\r\n}\r\nexport type ThemeList = {\r\n  [key: string]: Theme;\r\n  light: Theme;\r\n  dark: Theme;\r\n}\r\n\r\nexport const themes: ThemeList = {\r\n  light: {\r\n    \"--background-color\": \"#FFF\",\r\n    \"--text-color\": \"#000\",\r\n    \"--theme-button\": \"#1f1e1a\",\r\n    \"--border-color\": \"#000\"\r\n  },\r\n  dark: {\r\n    \"--background-color\": \"#000\",\r\n    \"--text-color\": \"#FFF\",\r\n    \"--theme-button\": \"#f7e435\",\r\n    \"--border-color\": \"#404040\"\r\n  }\r\n};","import { useEffect, useState } from \"react\";\r\nimport { themes } from \"../config/themes\";\r\n\r\ninterface useThemeProps {\r\n  setSelectedTheme: (arg0: string) => void;\r\n  selectedTheme: string;\r\n}\r\n\r\nconst useTheme = (): useThemeProps => {\r\n  const [selectedTheme, setSelectedTheme] = useState(\"light\");\r\n\r\n  useEffect(() => {\r\n    const storedTheme: string | null = localStorage.getItem(\"@iamtheluiz-horse-race/theme\");\r\n\r\n    if (storedTheme && Object.keys(themes).includes(storedTheme)) {\r\n      setSelectedTheme(storedTheme);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    applyTheme(selectedTheme);\r\n  }, [selectedTheme]);\r\n\r\n  function applyTheme(themeKey: string) {\r\n    const theme = themes[themeKey];\r\n    localStorage.setItem(\"@iamtheluiz-horse-race/theme\", themeKey);\r\n\r\n    Object.keys(theme).forEach((key: string) => {\r\n      const value = theme[key];\r\n      document.documentElement.style.setProperty(key, value);\r\n    });\r\n  }\r\n\r\n  return {\r\n    setSelectedTheme,\r\n    selectedTheme\r\n  };\r\n};\r\n\r\nexport default useTheme;","import React, { ButtonHTMLAttributes } from \"react\";\r\n\r\nimport \"./styles.css\";\r\n\r\ntype ButtonProps = ButtonHTMLAttributes<HTMLButtonElement>\r\n\r\nconst Button: React.FC<ButtonProps> = ({ children, ...props }) => {\r\n  return (\r\n    <button className=\"button\" {...props}>{children}</button>\r\n  );\r\n};\r\n\r\nexport default Button;","import React from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Button from \"../../components/Button\";\r\nimport useTheme from \"../../hooks/useTheme\";\r\n\r\nconst Main: React.FC = () => {\r\n  const history = useHistory();\r\n  const { selectedTheme, setSelectedTheme } = useTheme();\r\n\r\n  function handleNavigateToBet() {\r\n    history.push(\"/bet\");\r\n  }\r\n  function handleToggleTheme() {\r\n    setSelectedTheme(selectedTheme === \"light\" ? \"dark\" : \"light\");\r\n  }\r\n\r\n  return (\r\n    <section id=\"menu\">\r\n      <h1>Horse Race!</h1>\r\n      <span className=\"subtitle\">Are you ready? Make your bets!</span>\r\n      <Button id=\"start-game\" onClick={handleNavigateToBet}>Start!</Button>\r\n      <Button id=\"start-game\" style={{ backgroundColor: \"var(--theme-button)\"}} onClick={handleToggleTheme}>Theme</Button>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","import React, { createContext, useState, useContext } from \"react\";\r\n\r\nexport interface Horse {\r\n  name: string;\r\n  velocity: number;\r\n  position: number; // Percentage of the track\r\n}\r\n\r\ninterface HorseContextProps {\r\n  selectedHorse: Horse;\r\n  setSelectedHorse: (horse: Horse) => void;\r\n  horses: Horse[];\r\n  setHorses: (horses: Horse[]) => void;\r\n}\r\n\r\nconst HorseContext = createContext<HorseContextProps | null>(null);\r\n\r\nconst HorseProvider: React.FC = ({ children }) => {\r\n  const [selectedHorse, setSelectedHorse] = useState<Horse>({} as Horse);\r\n  const [horses, setHorses] = useState<Horse[]>([\r\n    {\r\n      name: \"Silver\",\r\n      velocity: 0,\r\n      position: 0\r\n    },\r\n    {\r\n      name: \"Pegasus\",\r\n      velocity: 0,\r\n      position: 0\r\n    },\r\n    {\r\n      name: \"Jockey\",\r\n      velocity: 0,\r\n      position: 0\r\n    },\r\n    {\r\n      name: \"Washington\",\r\n      velocity: 0,\r\n      position: 0\r\n    }\r\n  ]);\r\n\r\n  return (\r\n    <HorseContext.Provider value={{\r\n      selectedHorse,\r\n      setSelectedHorse,\r\n      horses,\r\n      setHorses\r\n    }}>\r\n      {children}\r\n    </HorseContext.Provider>\r\n  );\r\n};\r\n\r\nfunction useHorse(): HorseContextProps {\r\n  const context = useContext(HorseContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useHorse must be used within a HorseProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nexport { HorseProvider, useHorse };\r\n","import React, { createContext, useState, useContext } from \"react\";\r\n\r\ninterface MoneyContextProps {\r\n  bet: number;\r\n  setBet: (bet: number) => void;\r\n  balance: number;\r\n  setBalance: (balance: number) => void;\r\n}\r\n\r\nconst MoneyContext = createContext<MoneyContextProps | null>(null);\r\n\r\nconst MoneyProvider: React.FC = ({ children }) => {\r\n  const [balance, setBalance] = useState(10);\r\n  const [bet, setBet] = useState(1);\r\n\r\n  return (\r\n    <MoneyContext.Provider value={{\r\n      bet,\r\n      setBet,\r\n      balance,\r\n      setBalance,\r\n    }}>\r\n      {children}\r\n    </MoneyContext.Provider>\r\n  );\r\n};\r\n\r\nfunction useMoney(): MoneyContextProps {\r\n  const context = useContext(MoneyContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useMoney must be used within a MoneyProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n\r\nexport { MoneyProvider, useMoney };\r\n","import React from \"react\";\r\n\r\nimport { Horse, useHorse } from \"../../contexts/horse\";\r\n\r\nimport \"./styles.css\";\r\n\r\ninterface HorseItemProps {\r\n  horse: Horse;\r\n}\r\n\r\nconst HorseItem: React.FC<HorseItemProps> = ({ horse }) => {\r\n  const { setSelectedHorse, selectedHorse } = useHorse();\r\n\r\n  return (\r\n    <div\r\n      className={`horse-container horse-item ${horse.name === selectedHorse.name ? \"active\" : \"\"}`}\r\n      onClick={() => setSelectedHorse(horse)}\r\n    >\r\n      <img src=\"/img/horse.gif\" alt=\"Horse Gif\" />\r\n      <span>{horse.name}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HorseItem;","import React, { useContext, useEffect } from \"react\";\r\nimport { createContext, useState } from \"react\";\r\n\r\nexport interface DialogProps {\r\n  title: string;\r\n  type: \"success\" | \"warning\" | \"error\";\r\n  message: string;\r\n}\r\n\r\ninterface DialogContextProps {\r\n  isOpen: boolean;\r\n  dialog: DialogProps;\r\n  setDialog: (dialog: DialogProps) => void;\r\n  closeDialog: () => void;\r\n}\r\n\r\nexport const DialogContext = createContext({} as DialogContextProps);\r\n\r\nexport const DialogProvider: React.FC = ({ children }) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [dialog, setDialog] = useState<DialogProps>({} as DialogProps);\r\n\r\n  useEffect(() => {\r\n    if (dialog.title && dialog.message && dialog.type) {\r\n      setIsOpen(true);\r\n    }\r\n  }, [dialog]);\r\n\r\n  function closeDialog() {\r\n    setDialog({} as DialogProps);\r\n    setIsOpen(false);\r\n  }\r\n\r\n  return (\r\n    <DialogContext.Provider value={{\r\n      isOpen,\r\n      dialog,\r\n      setDialog,\r\n      closeDialog\r\n    }}>\r\n      {children}\r\n    </DialogContext.Provider>\r\n  );\r\n};\r\n\r\nexport function useDialog(): DialogContextProps {\r\n  const context = useContext(DialogContext);\r\n\r\n  if (!context) {\r\n    throw new Error(\"useHorse must be used within a HorseProvider\");\r\n  }\r\n\r\n  return context;\r\n}\r\n","import React, { FormEvent } from \"react\";\r\nimport { useHorse } from \"../../contexts/horse\";\r\nimport { useMoney } from \"../../contexts/money\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Button from \"../../components/Button\";\r\nimport HorseItem from \"../../components/HorseItem\";\r\n\r\nimport \"./styles.css\";\r\nimport { useDialog } from \"../../contexts/dialog\";\r\n\r\nconst Bet: React.FC = () => {\r\n  const { horses, selectedHorse } = useHorse();\r\n  const { balance, bet, setBet } = useMoney();\r\n  const { setDialog } = useDialog();\r\n  const history = useHistory();\r\n\r\n  function handleBetSubmit(event: FormEvent) {\r\n    event.preventDefault();\r\n\r\n    if (!horses.includes(selectedHorse)) {\r\n      setDialog({\r\n        title: \"Missing selected horse\",\r\n        message: \"(☞ﾟヮﾟ)☞ You need to select a horse to submit a bet!\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (bet < 0.01) {\r\n      setDialog({\r\n        title: \"Bet not allowed\",\r\n        message: \"You can't use a value lower than $0.01 in a bet!\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    if (bet > balance) {\r\n      setDialog({\r\n        title: \"Bet greater than balance\",\r\n        message: \"You can't bet more than you have! Take money in the bank (・_・;)\",\r\n        type: \"warning\"\r\n      });\r\n      return;\r\n    }\r\n\r\n    history.push(\"/race\");\r\n  }\r\n\r\n  return (\r\n    <section id=\"bet\">\r\n      <header>\r\n        <Button style={{ backgroundColor: \"#cc4242\" }} onClick={() => history.push(\"/\")}>Menu</Button>\r\n        <h1>Make Your Bet!</h1>\r\n        <div className=\"money\">\r\n          <div className=\"icon\">$</div>\r\n          <span>{balance.toFixed(2)}</span>\r\n        </div>\r\n      </header>\r\n      <div className=\"content\">\r\n        <div className=\"horse-list\">\r\n          {horses.map(horse => (\r\n            <HorseItem key={horse.name} horse={horse} />\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <footer>\r\n        <form onSubmit={handleBetSubmit}>\r\n          <span>$</span>\r\n          <input\r\n            className=\"input-text\"\r\n            type=\"number\"\r\n            step=\"0.01\"\r\n            value={bet}\r\n            onChange={event => setBet(Number(event.target.value))}\r\n          />\r\n          <Button style={{ backgroundColor: \"#93cc42\" }}>Bet!</Button>\r\n        </form>\r\n      </footer>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Bet;\r\n","export const betReward: {[name: number]: number} = {\r\n  1: 0.75,\r\n  2: 0.25,\r\n  3: 0,\r\n  4: 0\r\n};","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAA4klEQVRYR+2XsQ3DMAwErSXSBSkzRQbwJm6ySFoP41lSBumyhA0ZEEAYlGQSX3wAuhZOzzdJv9NA9iQyPUNX0HO8r1n0vLy7Z1vFneU0LymQcpFXlIVTFXSEeEVZOf8hqFaV1SUPR3XIA9Ia2sNJr+mxT5F8vp9fcxtcb5dT28LDSbmK4wUekKbQysnnd0EZJkVZQTW7LJxyllMQ1Suja2rUuKI4fHsIVRmKEw5JJ7U4Ew6FQ9IBV/xAjSuKw9fUdN+yCGii2bRQGAFNTqMWDPn+OlD7A8Xh20OoylCccKgXPzY1JifMrYyfYQAAAABJRU5ErkJggg==\"","import React, { useEffect, useState } from \"react\";\r\nimport { useHistory } from \"react-router\";\r\n\r\nimport { betReward } from \"../../config/betReward\";\r\n\r\nimport { Horse, useHorse } from \"../../contexts/horse\";\r\nimport { useDialog } from \"../../contexts/dialog\";\r\nimport { useMoney } from \"../../contexts/money\";\r\n\r\nimport fenceImage from \"../../assets/fence.png\";\r\n\r\nimport \"./styles.css\";\r\n\r\nconst Race: React.FC = () => {\r\n  const [winner, setWinner] = useState({} as Horse);\r\n  const { horses, setHorses, selectedHorse } = useHorse();\r\n  const { bet, balance, setBalance } = useMoney();\r\n  const dialog = useDialog();\r\n\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    resetGame();\r\n    startGame();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (winner.name){\r\n      endGame();\r\n    }\r\n  }, [winner]);\r\n\r\n  function resetGame() {\r\n    // Copy horse list\r\n    const horseList = [...horses];\r\n\r\n    for(let i = 0; i < horseList.length; i++) {\r\n      // Reset horse position\r\n      horseList[i].position = 0;\r\n    }\r\n\r\n    setHorses(horseList);\r\n  }\r\n\r\n  function startGame() {\r\n    // Game Loop\r\n    const gameLoopInterval = setInterval(() => {\r\n      const horseList = [...horses];  // Copy horse list\r\n\r\n      // Loop thought horses\r\n      for(let i = 0; i < horseList.length; i++) {\r\n        // Add a radom percentage from 0 to 1 to the horse position\r\n        horseList[i].position += Math.random();\r\n\r\n        // If the horse reach the end\r\n        if (horseList[i].position >= 100) {\r\n          setWinner(horseList[i]);\r\n          clearInterval(gameLoopInterval);  // End race\r\n          break;\r\n        }\r\n      }\r\n\r\n      setHorses(horseList);\r\n    }, 50);\r\n  }\r\n\r\n  function endGame() {\r\n    // Order horses by position\r\n    const podium = [...horses].sort((a, b) => {\r\n      if (a.position < b.position) \r\n        return 1;\r\n      if (a.position > b.position) \r\n        return -1;\r\n      return 0;\r\n    });\r\n\r\n    const selectedHorsePosition = podium.indexOf(selectedHorse) + 1;\r\n    const prize = bet * 4 * betReward[selectedHorsePosition];\r\n    setBalance(balance + prize - bet);\r\n\r\n    dialog.setDialog({\r\n      title: `${winner.name} wins!`,\r\n      message: prize === 0 ? `You lost $ ${bet}` : `You won $ ${prize}`,\r\n      type: \"success\"\r\n    });\r\n\r\n    history.push(\"/bet\");\r\n  }\r\n\r\n  return (\r\n    <section id=\"race\">\r\n      <div className=\"sky\"></div>\r\n      <div className=\"ground\">\r\n        <div className=\"fance\" style={{ backgroundImage: `url(${fenceImage})` }}></div>\r\n        <div className=\"racecourse\">\r\n          <div className=\"tracks\">\r\n            {horses.map(horse => (\r\n              <div key={horse.name} className=\"track\"></div>\r\n            ))}\r\n          </div>\r\n          <div className=\"horses\">\r\n            {horses.map(horse => (\r\n              <div key={horse.name} className=\"horse-item\" style={{ marginLeft: `${horse.position}%` }}>\r\n                <img src=\"/img/horse.gif\" alt=\"Horse Gif\" />\r\n              </div>\r\n            ))}\r\n          </div>\r\n          <div className=\"fance\" style={{ backgroundImage: `url(${fenceImage})` }}></div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Race;","import React from \"react\";\r\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\r\n\r\n// Pages\r\nimport Main from \"./pages/Main\";\r\nimport Bet from \"./pages/Bet\";\r\nimport Race from \"./pages/Race\";\r\n\r\nconst Routes: React.FC = () => {\r\n  return (\r\n    <BrowserRouter basename=\"horse-race\">\r\n      <Switch>\r\n        <Route path=\"/\" component={Main} exact />\r\n        <Route path=\"/bet\" component={Bet} exact />\r\n        <Route path=\"/race\" component={Race} exact />\r\n      </Switch>\r\n    </BrowserRouter>\r\n  );\r\n};\r\n\r\nexport default Routes;","import React from \"react\";\r\nimport { useDialog } from \"../../contexts/dialog\";\r\nimport Button from \"../Button\";\r\n\r\nimport \"./styles.css\";\r\n\r\nconst Dialog: React.FC = () => {\r\n  const {isOpen, dialog, closeDialog} = useDialog();\r\n\r\n  if (!isOpen) {\r\n    return <></>;\r\n  }\r\n\r\n  return isOpen && (\r\n    <>\r\n      <div id=\"dialog-container\">\r\n        <strong>{dialog.title}</strong>\r\n        <p>{dialog.message}</p>\r\n        <Button onClick={closeDialog}>Close</Button>\r\n      </div>\r\n      <div id=\"dialog-filter\" />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Dialog;","import React from \"react\";\r\n\r\nimport { DialogProvider } from \"./dialog\";\r\nimport { MoneyProvider } from \"./money\";\r\nimport { HorseProvider } from \"./horse\";\r\n\r\nimport Dialog from \"../components/Dialog\";\r\n\r\nexport const ApplicationProvider: React.FC = ({ children }) => {\r\n  return (\r\n    <DialogProvider>\r\n      <MoneyProvider>\r\n        <HorseProvider>\r\n          <Dialog />\r\n          {children}\r\n        </HorseProvider>\r\n      </MoneyProvider>\r\n    </DialogProvider>\r\n  );\r\n};","import React from \"react\";\n\nimport useTheme from \"./hooks/useTheme\";\nimport Routes from \"./routes\";\nimport { ApplicationProvider } from \"./contexts\";\n\n// Styles\nimport \"./styles/global.css\";\n\nconst App: React.FC = () => {\n  useTheme(); // Start in any page\n\n  return (\n    <ApplicationProvider>\n      <Routes />\n    </ApplicationProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}